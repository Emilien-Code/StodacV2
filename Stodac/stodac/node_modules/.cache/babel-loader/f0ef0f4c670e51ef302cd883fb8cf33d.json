{"remainingRequest":"/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/node_modules/babel-loader/lib/index.js!/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/src/views/LoginPage.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/src/views/LoginPage.vue","mtime":1645093961979},{"path":"/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/node_modules/cache-loader/dist/cjs.js","mtime":1643821156130},{"path":"/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/node_modules/babel-loader/lib/index.js","mtime":1643821156046},{"path":"/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/node_modules/cache-loader/dist/cjs.js","mtime":1643821156130},{"path":"/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/node_modules/vue-loader-v16/dist/index.js","mtime":1643821159958}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2VtaWxpZW52aXZpZXIvRG9jdW1lbnRzL0Rldi9naXQvU3RvZGFjL3N0b2RhYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlOiAnbG9naW4nLAogICAgICBlbWFpbDogJycsCiAgICAgIGZpcnN0TmFtZTogJycsCiAgICAgIGxhc3ROYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBtb2JpbGU6ICcnLAogICAgICBwYXNzd29yZFZlcmlmOiAnJywKICAgICAgY2xvc2VMb2dpbjogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7CiAgICB2YWxpZGF0ZWRGaWVsZHM6IGZ1bmN0aW9uIHZhbGlkYXRlZEZpZWxkcygpIHsKICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScpIHsKICAgICAgICByZXR1cm4gdGhpcy5lbWFpbCAhPT0gIiIgJiYgdGhpcy5maXJzdE5hbWUgIT09ICIiICYmIHRoaXMubGFzdE5hbWUgIT09ICIiICYmIHRoaXMucGFzc3dvcmQgIT09ICIiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLmVtYWlsICE9PSAiIiAmJiB0aGlzLnBhc3N3b3JkICE9PSAiIjsKICAgICAgfQogICAgfQogIH0sIG1hcFN0YXRlKFsnc3RhdHVzJ10pKSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcklEICE9PSAtMSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2NvbW1hbmRlJyk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzd2l0Y2hUb0NyZWF0ZUFjY291bnQ6IGZ1bmN0aW9uIHN3aXRjaFRvQ3JlYXRlQWNjb3VudCgpIHsKICAgICAgdGhpcy5tb2RlID0gJ2NyZWF0ZSc7CiAgICB9LAogICAgc3dpdGNoVG9Mb2dpbjogZnVuY3Rpb24gc3dpdGNoVG9Mb2dpbigpIHsKICAgICAgdGhpcy5tb2RlID0gJ2xvZ2luJzsKICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBhID0gdGhpczsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvZ2luJywgewogICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJ1c2VyIGxvZ2dlZEluIik7CiAgICAgICAgYS4kcm91dGVyLnB1c2goJy9jb21tYW5kZScpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiY2Fubm90IGxvZyIsIGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXRlQWNjb3VudDogZnVuY3Rpb24gY3JlYXRlQWNjb3VudCgpIHsKICAgICAgdmFyIGEgPSB0aGlzOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY3JlYXRlQWNjb3VudCcsIHsKICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICBmaXJzdE5hbWU6IHRoaXMuZmlyc3ROYW1lLAogICAgICAgIGxhc3ROYW1lOiB0aGlzLmxhc3ROYW1lLAogICAgICAgIG1vYmlsZTogMzMgKyB0aGlzLm1vYmlsZQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBhLmxvZ2luKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/emilienvivier/Documents/Dev/git/Stodac/stodac/src/views/LoginPage.vue"],"names":[],"mappings":";AA8CA,SAAS,QAAT,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAEb,EAAA,IAAI,EAAE,gBAAY;AAChB,WAAO;AACL,MAAA,IAAI,EAAE,OADD;AAEL,MAAA,KAAK,EAAE,EAFF;AAGL,MAAA,SAAS,EAAE,EAHN;AAIL,MAAA,QAAQ,EAAE,EAJL;AAKL,MAAA,QAAQ,EAAE,EALL;AAML,MAAA,MAAM,EAAE,EANH;AAOL,MAAA,aAAa,EAAC,EAPT;AAQL,MAAA,UAAU,EAAE;AARP,KAAP;AAUD,GAbY;AAcb,EAAA,QAAQ;AACN,IAAA,eAAe,EAAE,2BAAY;AAC3B,UAAI,KAAK,IAAL,KAAc,QAAlB,EAA4B;AAC1B,eAAO,KAAK,KAAL,KAAe,EAAf,IAAqB,KAAK,SAAL,KAAmB,EAAxC,IAA8C,KAAK,QAAL,KAAkB,EAAhE,IAAsE,KAAK,QAAL,KAAkB,EAA/F;AACF,OAFA,MAEO;AACL,eAAO,KAAK,KAAL,KAAe,EAAf,IAAqB,KAAK,QAAL,KAAkB,EAA9C;AACF;AACD;AAPK,KAQH,QAAQ,CAAC,CAAC,QAAD,CAAD,CARL,CAdK;AAwBb,EAAA,OAAO,EAAE,mBAAU;AACjB,QAAG,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,MAAvB,KAAkC,CAAC,CAAtC,EAAwC;AACtC,WAAK,OAAL,CAAa,IAAb,CAAkB,WAAlB;AACF;AACD,GA5BY;AA6Bb,EAAA,OAAO,EAAE;AACP,IAAA,qBAAqB,EAAE,iCAAY;AACjC,WAAK,IAAL,GAAY,QAAZ;AACD,KAHM;AAIP,IAAA,aAAa,EAAE,yBAAY;AACzB,WAAK,IAAL,GAAY,OAAZ;AACD,KANM;AAOP,IAAA,KAAK,EAAE,iBAAU;AACf,UAAM,CAAA,GAAI,IAAV;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,OAArB,EAA6B;AAC3B,QAAA,KAAK,EAAE,KAAK,KADe;AAE3B,QAAA,QAAQ,EAAC,KAAK;AAFa,OAA7B,EAGG,IAHH,CAGQ,YAAU;AAAC,QAAA,OAAO,CAAC,GAAR,CAAY,eAAZ;AAA6B,QAAA,CAAC,CAAC,OAAF,CAAU,IAAV,CAAe,WAAf;AAA4B,OAH5E,EAIG,KAJH,CAIS,UAAS,KAAT,EAAe;AAAC,QAAA,OAAO,CAAC,GAAR,CAAY,YAAZ,EAA0B,KAA1B;AAAiC,OAJ1D;AAKD,KAdM;AAeP,IAAA,aAAa,EAAE,yBAAU;AACvB,UAAM,CAAA,GAAI,IAAV;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,eAArB,EAAsC;AACpC,QAAA,KAAK,EAAE,KAAK,KADwB;AAEpC,QAAA,QAAQ,EAAE,KAAK,QAFqB;AAGpC,QAAA,SAAS,EAAE,KAAK,SAHoB;AAIpC,QAAA,QAAQ,EAAE,KAAK,QAJqB;AAKpC,QAAA,MAAM,EAAE,KAAK,KAAK;AALkB,OAAtC,EAMG,IANH,CAMQ,YAAU;AAChB,QAAA,CAAC,CAAC,KAAF;AACD,OARD,EAQG,KARH,CAQS,UAAU,KAAV,EAAgB;AACvB,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,OAVD;AAWF;AA5BO;AA7BI,CAAf","sourcesContent":["<template>\n    <div class=\"card\">\n    <h1 class=\"card__title\" v-if=\"mode === 'login'\">Connexion</h1>\n    <h1 class=\"card__title\" v-else>Inscription</h1>\n\n    <p class=\"card__subtitle\" v-if=\"mode === 'login'\">Tu n'as pas encore de compte ? <span class=\"card__action\" @click=\"switchToCreateAccount()\">Créer un compte</span></p>\n    <p class=\"card__subtitle\" v-else>Tu as déjà un compte ? <span class=\"card__action\" @click=\"switchToLogin()\">Se connecter</span></p>\n\n    <div class=\"form-row\">\n      <input v-model=\"email\" class=\"form-row__input\" type=\"text\" placeholder=\"Adresse mail\"/>\n    </div>\n\n    <div class=\"form-row\" v-if=\"mode === 'create'\">\n      <input v-model=\"firstName\" class=\"form-row__input\" type=\"text\" placeholder=\"Prénom\"/>\n      <input v-model=\"lastName\" class=\"form-row__input\" type=\"text\" placeholder=\"Nom\"/>\n    </div>\n    <div class=\"form-row\" v-if=\"mode === 'create'\">\n      <input v-model=\"mobile\" class=\"form-row__input\" type=\"tel\" placeholder=\"Numéro de téléphone\"/>\n    </div>\n    <div class=\"form-row\">\n      <input v-model=\"password\" class=\"form-row__input\" type=\"password\" placeholder=\"Mot de passe\"/>\n    </div>\n    <div class=\"form-row\" v-if=\"mode === 'create'\">\n      <input v-model=\"passwordVerif\" class=\"form-row__input\" type=\"password\" placeholder=\"Vérification du mot de passe\"/>\n    </div>\n    <div class=\"form-row\" v-if=\"mode === 'login' && status === 'error_login'\">\n      Adresse mail et/ou mot de passe invalide\n    </div>\n    <div class=\"form-row\" v-if=\"mode === 'create' && status === 'error_create'\">\n      Adresse mail déjà utilisée\n    </div>\n    <div class=\"form-row\">\n      <button @click=\"login()\" class=\"button\" :class=\"{'button--disabled' : !validatedFields}\" v-if=\"mode === 'login'\">\n        <span v-if=\"status === 'loading'\">Connexion en cours...</span>\n        <span v-else>Connexion</span>\n      </button>\n      <button @click=\"createAccount()\" class=\"button\" :class=\"{'button--disabled' : !validatedFields}\" v-else>\n        <span v-if=\"status === 'loading'\">Création en cours...</span>\n        <span v-else>Créer mon compte</span>\n      </button>\n    </div>\n    </div>\n</template>\n\n<script>\n\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'Login',\n  data: function () {\n    return {\n      mode: 'login',\n      email: '',\n      firstName: '',\n      lastName: '',\n      password: '',\n      mobile: '',\n      passwordVerif:'',\n      closeLogin: false\n    }\n  },\n  computed: {\n    validatedFields: function () {\n      if (this.mode === 'create') {\n        return this.email !== \"\" && this.firstName !== \"\" && this.lastName !== \"\" && this.password !== \"\";\n      } else {\n        return this.email !== \"\" && this.password !== \"\";\n      }\n    },\n    ...mapState(['status'])\n  },\n  mounted: function(){\n    if(this.$store.state.user.userID !== -1){\n      this.$router.push('/commande');\n    }\n  },\n  methods: {\n    switchToCreateAccount: function () {\n      this.mode = 'create';\n    },\n    switchToLogin: function () {\n      this.mode = 'login';\n    },\n    login: function(){\n      const a = this;\n      this.$store.dispatch('login',{\n        email: this.email,\n        password:this.password\n      }).then(function(){console.log(\"user loggedIn\");a.$router.push('/commande')})\n        .catch(function(error){console.log(\"cannot log\", error)})\n    },\n    createAccount: function(){\n      const a = this;\n      this.$store.dispatch('createAccount', {\n        email: this.email,\n        password: this.password,\n        firstName: this.firstName,\n        lastName: this.lastName,\n        mobile: 33 + this.mobile,\n      }).then(function(){\n        a.login();\n      }).catch(function (error){\n        console.log(error);\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;800&display=swap');\n\n.form-row {\n    display: flex;\n    margin: 16px 0;\n    gap:16px;\n    flex-wrap: wrap;\n  }\n\n  .form-row__input {\n    padding:8px;\n    border: none;\n    border-radius: 8px;\n    background:#f2f2f2;\n    font-weight: 500;\n    font-size: 16px;\n    flex:1;\n    min-width: 100px;\n    color: black;\n  }\n\n  .form-row__input::placeholder {\n    color:#aaaaaa;\n  }\n\n* {\n  font-family: 'Poppins', sans-serif;\n  margin:0;\n  padding: 0;\n  box-sizing: border-box;\n}\n#close{\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  border-radius: 50%;\n  width: 25px;\n  height: 25px;\n  background-color: #F1F1F1;\n  border:none;\n  cursor:pointer;\n  transition: .4s background-color;\n}\n#close:hover{\n  background-color: #E1E1E1;\n}\n#close div{\n  width: 2.5px;\n  height: 15px;\n  background-color: #A1A1A1;\n  border-radius: 2px;\n  position: absolute;\n  top : 5px;\n  left  : 10.5px;\n}\n#close div:nth-child(1){\n  transform:rotate(45deg);\n}\n#close div:nth-child(2){\n  transform:rotate(-45deg);\n}\n\n.card {\n  margin-left: auto;\n  margin-right: auto;\n  max-width: 100%;\n  width: 800px;\n  background:white;\n}\n\n.card__title {\n  text-align:center;\n  font-weight: 800;\n}\n\n.card__subtitle {\n  text-align: center;\n  color:#666;\n  font-weight: 500;\n}\n\n.button {\n  background: #419D79;\n  color:white;\n  border-radius: 8px;\n  font-weight: 800;\n  font-size: 15px;\n  border: none;\n  width: 100%;\n  padding: 16px;\n  transition: .4s background-color;\n}\n\n  .card__action {\n    color:#419D79;\n    text-decoration: underline;\n  }\n\n  .card__action:hover {\n    cursor:pointer;\n  }\n\n  .button:hover {\n    cursor:pointer;\n    background: #078A6C;\n  }\n\n  .button--disabled {\n    background:#cecece;\n    color:#ececec\n  }\n  .button--disabled:hover {\n    cursor:not-allowed;\n    background:#cecece;\n  }\n\n\n</style>"],"sourceRoot":""}]}