{"remainingRequest":"F:\\Stodac2\\Stodac\\stodac\\node_modules\\babel-loader\\lib\\index.js!F:\\Stodac2\\Stodac\\stodac\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\Stodac2\\Stodac\\stodac\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\Stodac2\\Stodac\\stodac\\src\\views\\LoginPage.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\Stodac2\\Stodac\\stodac\\src\\views\\LoginPage.vue","mtime":1642071752000},{"path":"F:\\Stodac2\\Stodac\\stodac\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639935630000},{"path":"F:\\Stodac2\\Stodac\\stodac\\node_modules\\babel-loader\\lib\\index.js","mtime":1639935630000},{"path":"F:\\Stodac2\\Stodac\\stodac\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639935630000},{"path":"F:\\Stodac2\\Stodac\\stodac\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1639935640000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjovU3RvZGFjMi9TdG9kYWMvc3RvZGFjL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vZGU6ICdsb2dpbicsCiAgICAgIGVtYWlsOiAnJywKICAgICAgZmlyc3ROYW1lOiAnJywKICAgICAgbGFzdE5hbWU6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIG1vYmlsZTogJycsCiAgICAgIHBhc3N3b3JkVmVyaWY6ICcnLAogICAgICBjbG9zZUxvZ2luOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHsKICAgIHZhbGlkYXRlZEZpZWxkczogZnVuY3Rpb24gdmFsaWRhdGVkRmllbGRzKCkgewogICAgICBpZiAodGhpcy5tb2RlID09PSAnY3JlYXRlJykgewogICAgICAgIHJldHVybiB0aGlzLmVtYWlsICE9PSAiIiAmJiB0aGlzLmZpcnN0TmFtZSAhPT0gIiIgJiYgdGhpcy5sYXN0TmFtZSAhPT0gIiIgJiYgdGhpcy5wYXNzd29yZCAhPT0gIiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZW1haWwgIT09ICIiICYmIHRoaXMucGFzc3dvcmQgIT09ICIiOwogICAgICB9CiAgICB9CiAgfSwgbWFwU3RhdGUoWydzdGF0dXMnXSkpLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VySUQgIT09IC0xKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvY29tbWFuZGUnKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN3aXRjaFRvQ3JlYXRlQWNjb3VudDogZnVuY3Rpb24gc3dpdGNoVG9DcmVhdGVBY2NvdW50KCkgewogICAgICB0aGlzLm1vZGUgPSAnY3JlYXRlJzsKICAgIH0sCiAgICBzd2l0Y2hUb0xvZ2luOiBmdW5jdGlvbiBzd2l0Y2hUb0xvZ2luKCkgewogICAgICB0aGlzLm1vZGUgPSAnbG9naW4nOwogICAgfSwKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIGEgPSB0aGlzOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9naW4nLCB7CiAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coInVzZXIgbG9nZ2VkSW4iKTsKICAgICAgICBhLiRyb3V0ZXIucHVzaCgnL2NvbW1hbmRlJyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJjYW5ub3QgbG9nIiwgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBjcmVhdGVBY2NvdW50OiBmdW5jdGlvbiBjcmVhdGVBY2NvdW50KCkgewogICAgICB2YXIgYSA9IHRoaXM7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjcmVhdGVBY2NvdW50JywgewogICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgIGZpcnN0TmFtZTogdGhpcy5maXJzdE5hbWUsCiAgICAgICAgbGFzdE5hbWU6IHRoaXMubGFzdE5hbWUsCiAgICAgICAgbW9iaWxlOiAzMyArIHRoaXMubW9iaWxlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGEubG9naW4oKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["F:\\Stodac2\\Stodac\\stodac\\src\\views\\LoginPage.vue"],"names":[],"mappings":";AA8CA,SAAS,QAAT,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAEb,EAAA,IAAI,EAAE,gBAAY;AAChB,WAAO;AACL,MAAA,IAAI,EAAE,OADD;AAEL,MAAA,KAAK,EAAE,EAFF;AAGL,MAAA,SAAS,EAAE,EAHN;AAIL,MAAA,QAAQ,EAAE,EAJL;AAKL,MAAA,QAAQ,EAAE,EALL;AAML,MAAA,MAAM,EAAE,EANH;AAOL,MAAA,aAAa,EAAC,EAPT;AAQL,MAAA,UAAU,EAAE;AARP,KAAP;AAUD,GAbY;AAcb,EAAA,QAAQ;AACN,IAAA,eAAe,EAAE,2BAAY;AAC3B,UAAI,KAAK,IAAL,KAAc,QAAlB,EAA4B;AAC1B,eAAO,KAAK,KAAL,KAAe,EAAf,IAAqB,KAAK,SAAL,KAAmB,EAAxC,IAA8C,KAAK,QAAL,KAAkB,EAAhE,IAAsE,KAAK,QAAL,KAAkB,EAA/F;AACF,OAFA,MAEO;AACL,eAAO,KAAK,KAAL,KAAe,EAAf,IAAqB,KAAK,QAAL,KAAkB,EAA9C;AACF;AACD;AAPK,KAQH,QAAQ,CAAC,CAAC,QAAD,CAAD,CARL,CAdK;AAwBb,EAAA,OAAO,EAAE,mBAAU;AACjB,QAAG,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,MAAvB,KAAkC,CAAC,CAAtC,EAAwC;AACtC,WAAK,OAAL,CAAa,IAAb,CAAkB,WAAlB;AACF;AACD,GA5BY;AA6Bb,EAAA,OAAO,EAAE;AACP,IAAA,qBAAqB,EAAE,iCAAY;AACjC,WAAK,IAAL,GAAY,QAAZ;AACD,KAHM;AAIP,IAAA,aAAa,EAAE,yBAAY;AACzB,WAAK,IAAL,GAAY,OAAZ;AACD,KANM;AAOP,IAAA,KAAK,EAAE,iBAAU;AACf,UAAM,CAAA,GAAI,IAAV;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,OAArB,EAA6B;AAC3B,QAAA,KAAK,EAAE,KAAK,KADe;AAE3B,QAAA,QAAQ,EAAC,KAAK;AAFa,OAA7B,EAGG,IAHH,CAGQ,YAAU;AAAC,QAAA,OAAO,CAAC,GAAR,CAAY,eAAZ;AAA6B,QAAA,CAAC,CAAC,OAAF,CAAU,IAAV,CAAe,WAAf;AAA4B,OAH5E,EAIG,KAJH,CAIS,UAAS,KAAT,EAAe;AAAC,QAAA,OAAO,CAAC,GAAR,CAAY,YAAZ,EAA0B,KAA1B;AAAiC,OAJ1D;AAKD,KAdM;AAeP,IAAA,aAAa,EAAE,yBAAU;AACvB,UAAM,CAAA,GAAI,IAAV;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,eAArB,EAAsC;AACpC,QAAA,KAAK,EAAE,KAAK,KADwB;AAEpC,QAAA,QAAQ,EAAE,KAAK,QAFqB;AAGpC,QAAA,SAAS,EAAE,KAAK,SAHoB;AAIpC,QAAA,QAAQ,EAAE,KAAK,QAJqB;AAKpC,QAAA,MAAM,EAAE,KAAK,KAAK;AALkB,OAAtC,EAMG,IANH,CAMQ,YAAU;AAChB,QAAA,CAAC,CAAC,KAAF;AACD,OARD,EAQG,KARH,CAQS,UAAU,KAAV,EAAgB;AACvB,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,OAVD;AAWF;AA5BO;AA7BI,CAAf","sourcesContent":["<template>\r\n    <div class=\"card\">\r\n    <h1 class=\"card__title\" v-if=\"mode === 'login'\">Connexion</h1>\r\n    <h1 class=\"card__title\" v-else>Inscription</h1>\r\n\r\n    <p class=\"card__subtitle\" v-if=\"mode === 'login'\">Tu n'as pas encore de compte ? <span class=\"card__action\" @click=\"switchToCreateAccount()\">Créer un compte</span></p>\r\n    <p class=\"card__subtitle\" v-else>Tu as déjà un compte ? <span class=\"card__action\" @click=\"switchToLogin()\">Se connecter</span></p>\r\n\r\n    <div class=\"form-row\">\r\n      <input v-model=\"email\" class=\"form-row__input\" type=\"text\" placeholder=\"Adresse mail\"/>\r\n    </div>\r\n\r\n    <div class=\"form-row\" v-if=\"mode === 'create'\">\r\n      <input v-model=\"firstName\" class=\"form-row__input\" type=\"text\" placeholder=\"Prénom\"/>\r\n      <input v-model=\"lastName\" class=\"form-row__input\" type=\"text\" placeholder=\"Nom\"/>\r\n    </div>\r\n    <div class=\"form-row\" v-if=\"mode === 'create'\">\r\n      <input v-model=\"mobile\" class=\"form-row__input\" type=\"tel\" placeholder=\"Numéro de téléphone\"/>\r\n    </div>\r\n    <div class=\"form-row\">\r\n      <input v-model=\"password\" class=\"form-row__input\" type=\"password\" placeholder=\"Mot de passe\"/>\r\n    </div>\r\n    <div class=\"form-row\" v-if=\"mode === 'create'\">\r\n      <input v-model=\"passwordVerif\" class=\"form-row__input\" type=\"password\" placeholder=\"Vérification du mot de passe\"/>\r\n    </div>\r\n    <div class=\"form-row\" v-if=\"mode === 'login' && status === 'error_login'\">\r\n      Adresse mail et/ou mot de passe invalide\r\n    </div>\r\n    <div class=\"form-row\" v-if=\"mode === 'create' && status === 'error_create'\">\r\n      Adresse mail déjà utilisée\r\n    </div>\r\n    <div class=\"form-row\">\r\n      <button @click=\"login()\" class=\"button\" :class=\"{'button--disabled' : !validatedFields}\" v-if=\"mode === 'login'\">\r\n        <span v-if=\"status === 'loading'\">Connexion en cours...</span>\r\n        <span v-else>Connexion</span>\r\n      </button>\r\n      <button @click=\"createAccount()\" class=\"button\" :class=\"{'button--disabled' : !validatedFields}\" v-else>\r\n        <span v-if=\"status === 'loading'\">Création en cours...</span>\r\n        <span v-else>Créer mon compte</span>\r\n      </button>\r\n    </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data: function () {\r\n    return {\r\n      mode: 'login',\r\n      email: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      password: '',\r\n      mobile: '',\r\n      passwordVerif:'',\r\n      closeLogin: false\r\n    }\r\n  },\r\n  computed: {\r\n    validatedFields: function () {\r\n      if (this.mode === 'create') {\r\n        return this.email !== \"\" && this.firstName !== \"\" && this.lastName !== \"\" && this.password !== \"\";\r\n      } else {\r\n        return this.email !== \"\" && this.password !== \"\";\r\n      }\r\n    },\r\n    ...mapState(['status'])\r\n  },\r\n  mounted: function(){\r\n    if(this.$store.state.user.userID !== -1){\r\n      this.$router.push('/commande');\r\n    }\r\n  },\r\n  methods: {\r\n    switchToCreateAccount: function () {\r\n      this.mode = 'create';\r\n    },\r\n    switchToLogin: function () {\r\n      this.mode = 'login';\r\n    },\r\n    login: function(){\r\n      const a = this;\r\n      this.$store.dispatch('login',{\r\n        email: this.email,\r\n        password:this.password\r\n      }).then(function(){console.log(\"user loggedIn\");a.$router.push('/commande')})\r\n        .catch(function(error){console.log(\"cannot log\", error)})\r\n    },\r\n    createAccount: function(){\r\n      const a = this;\r\n      this.$store.dispatch('createAccount', {\r\n        email: this.email,\r\n        password: this.password,\r\n        firstName: this.firstName,\r\n        lastName: this.lastName,\r\n        mobile: 33 + this.mobile,\r\n      }).then(function(){\r\n        a.login();\r\n      }).catch(function (error){\r\n        console.log(error);\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;800&display=swap');\r\n\r\n.form-row {\r\n    display: flex;\r\n    margin: 16px 0;\r\n    gap:16px;\r\n    flex-wrap: wrap;\r\n  }\r\n\r\n  .form-row__input {\r\n    padding:8px;\r\n    border: none;\r\n    border-radius: 8px;\r\n    background:#f2f2f2;\r\n    font-weight: 500;\r\n    font-size: 16px;\r\n    flex:1;\r\n    min-width: 100px;\r\n    color: black;\r\n  }\r\n\r\n  .form-row__input::placeholder {\r\n    color:#aaaaaa;\r\n  }\r\n\r\n* {\r\n  font-family: 'Poppins', sans-serif;\r\n  margin:0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n#close{\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  border-radius: 50%;\r\n  width: 25px;\r\n  height: 25px;\r\n  background-color: #F1F1F1;\r\n  border:none;\r\n  cursor:pointer;\r\n  transition: .4s background-color;\r\n}\r\n#close:hover{\r\n  background-color: #E1E1E1;\r\n}\r\n#close div{\r\n  width: 2.5px;\r\n  height: 15px;\r\n  background-color: #A1A1A1;\r\n  border-radius: 2px;\r\n  position: absolute;\r\n  top : 5px;\r\n  left  : 10.5px;\r\n}\r\n#close div:nth-child(1){\r\n  transform:rotate(45deg);\r\n}\r\n#close div:nth-child(2){\r\n  transform:rotate(-45deg);\r\n}\r\n\r\n.card {\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  max-width: 100%;\r\n  width: 800px;\r\n  background:white;\r\n}\r\n\r\n.card__title {\r\n  text-align:center;\r\n  font-weight: 800;\r\n}\r\n\r\n.card__subtitle {\r\n  text-align: center;\r\n  color:#666;\r\n  font-weight: 500;\r\n}\r\n\r\n.button {\r\n  background: #419D79;\r\n  color:white;\r\n  border-radius: 8px;\r\n  font-weight: 800;\r\n  font-size: 15px;\r\n  border: none;\r\n  width: 100%;\r\n  padding: 16px;\r\n  transition: .4s background-color;\r\n}\r\n\r\n  .card__action {\r\n    color:#419D79;\r\n    text-decoration: underline;\r\n  }\r\n\r\n  .card__action:hover {\r\n    cursor:pointer;\r\n  }\r\n\r\n  .button:hover {\r\n    cursor:pointer;\r\n    background: #078A6C;\r\n  }\r\n\r\n  .button--disabled {\r\n    background:#cecece;\r\n    color:#ececec\r\n  }\r\n  .button--disabled:hover {\r\n    cursor:not-allowed;\r\n    background:#cecece;\r\n  }\r\n\r\n\r\n</style>"],"sourceRoot":""}]}